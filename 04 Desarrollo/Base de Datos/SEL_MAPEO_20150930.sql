--  Generate SQL --  Version:                   	V5R4M0 060210 --  Generated on:              	30/09/15 15:04:40 --  Relational Database:       	B103BE2F --  Standards Option:          	DB2 UDB iSeries   SET PATH "QSYS","QSYS2","CARVALHORA" ;   CREATE PROCEDURE CARVALHORA.SEL_MAPEO ( 	IN P_ID_LAYOUT INTEGER , 	IN P_STATUS SMALLINT ) 	DYNAMIC RESULT SETS 1 	LANGUAGE SQL 	SPECIFIC CARVALHORA.SEL_MAPEO 	NOT DETERMINISTIC 	READS SQL DATA 	CALLED ON NULL INPUT 	SET OPTION  ALWBLK = *ALLREAD , 	ALWCPYDTA = *OPTIMIZE , 	COMMIT = *NONE , 	DECRESULT = (31, 31, 00) , 	DFTRDBCOL = *NONE , 	DYNDFTCOL = *NO , 	DYNUSRPRF = *USER , 	SRTSEQ = *HEX   	P1 : BEGIN       	DECLARE C1 CURSOR WITH RETURN FOR   		SELECT A . * , B . TCA_NOM , B . TCA_CPT, ('C' || VARCHAR(C. LYC_CRE)) AS CAM_ORIGEN 		FROM (CARVALHORA . CAT_LAMA A INNER JOIN CARVALHORA . CAT_TICA B ON A . TCA_CVE = B . TCA_CVE) INNER JOIN 		             CARVALHORA . CAT_LACA C ON A . LYC_CVE = C . LYC_CVE 		WHERE A . LAY_CVE = P_ID_LAYOUT ;       	DECLARE C2 CURSOR WITH RETURN FOR   		SELECT A . * , B . TCA_NOM , B . TCA_CPT, ('C' || VARCHAR(C. LYC_CRE)) AS CAM_ORIGEN 		FROM (CARVALHORA . CAT_LAMA A INNER JOIN CARVALHORA . CAT_TICA B ON A . TCA_CVE = B . TCA_CVE) INNER JOIN 		             CARVALHORA . CAT_LACA C ON A . LYC_CVE = C . LYC_CVE 		WHERE A . LAY_CVE = P_ID_LAYOUT AND A . STA_CVE = P_STATUS ;       	IF P_STATUS = - 1 THEN   		OPEN C1 ;   	ELSE   		OPEN C2 ;   	END IF ;       END P1  ;